<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
		"http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
	<title>widget attribute unit test (in constructor and get()/set())</title>
	<script type="text/javascript" src="../boilerplate.js"></script>

	<script type="text/javascript">
		require([
			"doh/runner", "dui/register",
			"dojo/dom", "dojo/dom-attr", "dojo/dom-class", "dojo/dom-style", "dojo/sniff",
			"dui/_WidgetBase",
			"dojo/domReady!"
		], function(doh, register, dom, domAttr, domClass, domStyle, has, _WidgetBase){

			doh.register("attributes", [
				// Test attributes mapped to DOMNodes
				function domMapping(){
					var IndividualMaps = register("dui-individual-maps", _WidgetBase, {
						// Mapping foo to this.domNode.foo
						foo:"",
						_setFooAttr: "",
		
						// Mapping bar to this.buttonNode.bar
						bar: "",
						_setBarAttr: "buttonNode",
		
						// Mapping plainText to this.plainTextNode.innerHTML
						plainText: "",
						_setPlainTextAttr: {node: "plainTextNode", type: "innerText"},

						buildRendering: function(){
							this.domNode = this.ownerDocument.createElement("div");
							this.domNode.className = "class1";

							this.buttonNode = this.focusNode = this.ownerDocument.createElement("button");
							this.buttonNode.textContent = "hi";
							this.domNode.appendChild(this.buttonNode);

							this.plainTextNode = this.focusNode = this.ownerDocument.createElement("span");
							this.plainTextNode.textContent = "original plain text";
							this.domNode.appendChild(this.plainTextNode);
						}
					});

					var widget = new IndividualMaps({
						foo:"value1",
						bar:"value2",
						"class":"class2",
						style:"height: 123px",
						plainText: "hello world <>&;",
						"name-with-dashes": "name with dashes"
					}).placeAt(dom.byId("wrapper"));

					// test attributes specified to constructor were copied over to DOM
					doh.is("value1", widget.domNode.getAttribute("foo"), "widget.domNode.getAttribute('foo')");
					doh.is("value2", widget.buttonNode.getAttribute("bar"), "widget.domNode.getAttribute('bar')");
					doh.t(domClass.contains(widget.domNode, "class1"), "class1");
					doh.t(domClass.contains(widget.domNode, "class2"), "class2");
					doh.is("hello world &lt;&gt;&amp;;", widget.plainTextNode.innerHTML, "innerHTML");
				}
			]);	// doh.register()

			doh.run();

		});	// require()

	</script>
</head>
<body>
	<h1>_WidgetBase Attribute Unit Test</h1>
	<div id="wrapper"></div>
</body>
</html>
